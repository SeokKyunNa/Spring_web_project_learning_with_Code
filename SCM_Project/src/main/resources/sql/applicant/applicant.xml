<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Applicant">

	<!-- 채용공고 지원하기 -->
	<insert id="biz_apply" parameterType="applicantbean">
		insert into applicant
		(BIZ_NUM, APPLICANT_ID, APPLICANT_NAME, APPLICANT_AGE, APPLICANT_PIC, APPLY_DATE)
		values
		(#{biz_num}, #{applicant_id}, #{applicant_name}, #{applicant_age}, #{applicant_pic, jdbcType=VARCHAR}, sysdate)
	</insert>

	<!-- 지원자 리스트 보기 -->
	<select id="applicant_list" parameterType="java.util.Map" resultType="applicantbean">	
		select * from
			(select rownum rnum, BIZ_NUM, APPLICANT_ID, APPLICANT_NAME, APPLICANT_AGE, APPLICANT_PIC, APPLY_DATE
			from
				(select * from
				applicant where biz_num = #{biz_num}
				order by apply_date asc
				)
			)
		where
		rnum<![CDATA[>]]>=#{startrow}
		and rnum<![CDATA[<]]>=#{endrow}
	</select>
	
	<!-- 지원자 수 확인 -->
	<select id="applicant_count" parameterType="int" resultType="int">
		select count(*) from applicant
		where biz_num = #{biz_num}
	</select>
	
	<!-- 지원자 중복 확인 -->
	<select id="apply_idcheck" parameterType="java.util.Map" resultType="int">
		select count(*) from applicant
		where biz_num = #{biz_num} and applicant_id = #{id}
	</select>

	<!-- 마감날짜 확인 -->
	<select id="apply_datecheck" parameterType="int" resultType="String">
		select biz_expiry_date from biz_board
		where biz_num = #{biz_num}
	</select>
</mapper>


